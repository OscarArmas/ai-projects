<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Una Noche M√°gica</title>
    <!-- Fuentes tipogr√°ficas: Pacifico (t√≠tulos) y Quicksand (texto) -->
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #0d1b2a; /* Color de respaldo por si la imagen no carga */
            font-family: 'Quicksand', sans-serif;
            cursor: none; /* Ocultamos el cursor nativo para usar el m√°gico */
        }

        /* --- EFECTO VIGNETTE (BORDES OSCUROS) --- */
        .vignette {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Permite clicks a trav√©s */
            background: radial-gradient(circle, rgba(0,0,0,0) 50%, rgba(0,0,0,0.6) 100%);
            z-index: 5; /* Por encima del fondo pero debajo del texto */
        }

        /* --- CURSOR M√ÅGICO --- */
        .cursor {
            position: fixed;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 9999;
            transition: width 0.2s, height 0.2s, background 0.2s;
            mix-blend-mode: difference;
        }

        .cursor::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 4px;
            height: 4px;
            background: #fff;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 10px #fff, 0 0 20px #ff9f1c;
        }

        /* Estela del cursor */
        .cursor-trail {
            position: fixed;
            width: 8px;
            height: 8px;
            background: rgba(255, 159, 28, 0.6);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9998;
            animation: fadeOutTrail 0.5s forwards;
        }

        @keyframes fadeOutTrail {
            to { opacity: 0; transform: scale(0); }
        }

        /* --- CONFIGURACI√ìN DEL FONDO --- */
        .background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            /* Aqu√≠ cargamos tu imagen - probamos m√∫ltiples formatos de ruta */
            background-image: url('./night.png'); 
            background-position: center center; /* Centrado para mejor visualizaci√≥n */
            background-repeat: no-repeat;
            background-size: cover; /* Cubre toda la pantalla */
            background-attachment: fixed; /* Fijar el fondo */
            z-index: 0; /* Cambiado de -1 a 0 para estar detr√°s del canvas pero visible */
            /* Asegurar que el contenedor tenga dimensiones */
            min-width: 100%;
            min-height: 100%;
        }

        /* --- EL CONTADOR --- */
        #counter {
            position: fixed;
            top: 20px;
            right: 20px;
            color: rgba(255, 255, 255, 0.9);
            font-family: 'Pacifico', cursive; /* Fuente manuscrita elegante */
            font-size: 1.8rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            background: rgba(13, 27, 42, 0.4); /* Fondo muy sutil */
            padding: 10px 25px;
            border-radius: 30px;
            border: 1px solid rgba(255, 159, 28, 0.3);
            pointer-events: none;
            transition: opacity 0.5s;
        }

        /* --- CANVAS DE FUEGOS --- */
        canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
            cursor: crosshair;
            /* Asegurar que el canvas sea transparente para ver el fondo */
            background: transparent;
            pointer-events: auto; /* Permitir clicks en el canvas */
        }

        /* --- MENSAJE FINAL (TRANSPARENTE) --- */
        #message-box {
            position: absolute;
            top: 40%; /* Un poco m√°s arriba para no tapar las carpas */
            left: 50%;
            transform: translate(-50%, -50%) scale(0.5);
            text-align: center;
            width: 90%;
            
            /* SIN FONDO (TRANSPARENTE) */
            background: transparent; 
            
            opacity: 0;
            pointer-events: none;
            transition: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Efecto rebote suave */
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        #message-box.visible {
            opacity: 1;
            pointer-events: auto;
            transform: translate(-50%, -50%) scale(1);
        }

        /* Estilo del Texto Principal */
        h1 {
            font-family: 'Pacifico', cursive;
            font-size: 3.5rem; /* Un poco m√°s grande para esta fuente */
            margin: 0;
            color: #fff;
            /* Sombra c√°lida inspirada en las luces de la imagen */
            text-shadow: 0 0 10px rgba(255, 159, 28, 0.8), 0 0 20px rgba(255, 105, 180, 0.4);
            line-height: 1.3;
            letter-spacing: 1px;
            /* Animaci√≥n de latido suave */
            animation: heartbeat 2s infinite ease-in-out;
        }

        @keyframes heartbeat {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); text-shadow: 0 0 15px rgba(255, 159, 28, 1), 0 0 25px rgba(255, 105, 180, 0.6); }
            100% { transform: scale(1); }
        }

        /* Estilo del Bot√≥n */
        .btn-si {
            margin-top: 30px;
            background: linear-gradient(45deg, #ff9f1c, #ffbf69); /* Degradado c√°lido */
            color: #0d1b2a;
            border: none;
            padding: 15px 60px;
            font-size: 1.8rem;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Pacifico', cursive;
            box-shadow: 0 5px 20px rgba(255, 159, 28, 0.5);
            transition: transform 0.2s, background 0.3s, opacity 0.5s, display 0.5s;
            display: none; /* Oculto inicialmente hasta que se muestre el mensaje final */
            opacity: 0;
        }
        
        .btn-si.show {
            display: block;
            opacity: 1;
        }

        .btn-si:hover {
            transform: scale(1.1);
            background: #ffbf69; /* Un naranja m√°s claro al pasar el mouse */
            box-shadow: 0 0 25px rgba(255, 159, 28, 0.8);
        }

        /* Animaci√≥n cuando se presiona el bot√≥n */
        .btn-si.clicking {
            animation: buttonPress 0.6s forwards ease-out;
            pointer-events: none; /* Evitar m√∫ltiples clicks */
        }

        @keyframes buttonPress {
            0% {
                transform: scale(1);
                box-shadow: 0 5px 20px rgba(255, 159, 28, 0.5);
            }
            30% {
                transform: scale(0.95);
                background: #fff;
                color: #ff9f1c;
                box-shadow: 0 0 40px rgba(255, 255, 255, 0.9), 0 0 80px rgba(255, 159, 28, 0.8);
            }
            60% {
                transform: scale(1.3);
                background: linear-gradient(45deg, #ff9f1c, #ffbf69);
                box-shadow: 0 0 60px rgba(255, 159, 28, 1), 0 0 120px rgba(255, 255, 255, 0.8);
                filter: brightness(1.5);
            }
            100% {
                transform: scale(2);
                opacity: 0;
                filter: blur(10px) brightness(2);
            }
        }

        /* Estilo del Bot√≥n NO (m√°s discreto con efecto de luz) */
        .btn-no {
            margin-top: 20px;
            margin-left: 20px;
            background: rgba(100, 100, 100, 0.3); /* Gris muy transparente */
            color: rgba(255, 255, 255, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 8px 25px;
            font-size: 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-family: 'Quicksand', sans-serif;
            /* Efecto de luz/resplandor */
            box-shadow: 0 0 10px rgba(200, 200, 255, 0.4), 
                        0 0 20px rgba(150, 150, 255, 0.2),
                        0 2px 5px rgba(0, 0, 0, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: none; /* Oculto inicialmente */
            opacity: 0;
            position: fixed; /* Para poder moverlo libremente */
            z-index: 100;
            /* Efecto de brillo pulsante */
            animation: subtleGlow 2s ease-in-out infinite;
        }
        
        @keyframes subtleGlow {
            0%, 100% {
                box-shadow: 0 0 10px rgba(200, 200, 255, 0.4), 
                            0 0 20px rgba(150, 150, 255, 0.2),
                            0 2px 5px rgba(0, 0, 0, 0.2);
            }
            50% {
                box-shadow: 0 0 15px rgba(200, 200, 255, 0.6), 
                            0 0 30px rgba(150, 150, 255, 0.4),
                            0 2px 5px rgba(0, 0, 0, 0.2);
            }
        }
        
        .btn-no.show {
            display: inline-block;
            opacity: 1;
        }

        .btn-no:hover {
            background: rgba(120, 120, 120, 0.4);
            color: rgba(255, 255, 255, 0.8);
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(200, 200, 255, 0.6), 
                        0 0 40px rgba(150, 150, 255, 0.4),
                        0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .btn-no.moving {
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            /* Brillo m√°s intenso mientras se mueve */
            box-shadow: 0 0 20px rgba(200, 200, 255, 0.8), 
                        0 0 40px rgba(150, 150, 255, 0.6),
                        0 0 60px rgba(100, 100, 255, 0.3),
                        0 2px 5px rgba(0, 0, 0, 0.2);
        }

        /* Rastro de cometa (part√≠culas que siguen al bot√≥n) */
        .comet-trail {
            position: fixed;
            width: 4px;
            height: 4px;
            background: radial-gradient(circle, rgba(200, 200, 255, 0.8) 0%, rgba(150, 150, 255, 0.4) 50%, transparent 100%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 99;
            box-shadow: 0 0 6px rgba(200, 200, 255, 0.6);
            animation: fadeTrail 0.8s forwards;
        }

        @keyframes fadeTrail {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(0.3);
            }
        }

        /* Instrucci√≥n peque√±a al inicio */
        .hint {
            position: absolute;
            bottom: 50px;
            width: 100%;
            text-align: center;
            color: rgba(255, 153, 200, 0.8); /* Rosado como las flores */
            font-size: 1.1rem;
            font-family: 'Fredoka One', cursive;
            pointer-events: none;
            animation: fadeOut 4s forwards;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        @keyframes fadeOut {
            0% { opacity: 0; transform: translateY(10px); }
            20% { opacity: 1; transform: translateY(0); }
            80% { opacity: 1; }
            100% { opacity: 0; }
        }

        /* Ocultar el contador al final */
        .hidden {
            opacity: 0;
        }

    </style>
</head>
<body>

    <!-- Contenedor de fondo con imagen -->
    <div class="background-container">
        <!-- Imagen de fondo como respaldo (se oculta si el background-image funciona) -->
        <img id="bg-image" src="./night.png" alt="Fondo nocturno" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: -1;">
    </div>
    
    <div class="vignette"></div> <!-- Efecto de bordes oscuros -->
    <div class="cursor" id="cursor"></div> <!-- Cursor m√°gico -->

    <!-- Contador de Magia -->
    <div id="counter">Magia: 0 / 11</div>

    <div class="hint">Haz clic en el cielo para celebrar...</div>

    <canvas id="canvas"></canvas>

    <div id="message-box">
        <!-- El texto flota sin caja detr√°s -->
        <h1>¬øQuieres ser mi novia?</h1>
        <div style="display: flex; gap: 15px; align-items: center; justify-content: center; flex-wrap: wrap;">
            <button class="btn-si" onclick="aceptar()">¬°S√ç!</button>
            <button class="btn-no" id="btn-no" onclick="moverBotonNo()">No</button>
        </div>
    </div>

    <script>
        // --- VERIFICACI√ìN Y CARGA DE IMAGEN DE FONDO ---
        // Este script asegura que la imagen de fondo se cargue correctamente
        (function() {
            const bgContainer = document.querySelector('.background-container');
            const bgImage = document.getElementById('bg-image');
            const img = new Image();
            
            // Funci√≥n para aplicar la imagen cuando se carga correctamente
            const applyImage = (path) => {
                console.log('‚úÖ Imagen night.png cargada correctamente desde:', path);
                bgContainer.style.backgroundImage = `url("${path}")`;
                // Ocultar el elemento img ya que usamos background-image
                if (bgImage) bgImage.style.display = 'none';
            };
            
            // Funci√≥n para usar el elemento img como respaldo
            const useImgFallback = (path) => {
                console.log('‚ö†Ô∏è Usando elemento <img> como respaldo desde:', path);
                bgContainer.style.backgroundImage = 'none';
                if (bgImage) {
                    bgImage.src = path;
                    bgImage.style.display = 'block';
                }
            };
            
            // Intentar cargar la imagen y verificar si se carga correctamente
            img.onload = function() {
                applyImage('./night.png');
            };
            
            img.onerror = function() {
                console.error('‚ùå Error al cargar night.png, intentando rutas alternativas...');
                // Intentar diferentes rutas
                const alternativePaths = [
                    'night.png',
                    './night.png',
                    '../night.png',
                    'ai-projects/geometry-dash/night.png'
                ];
                
                let pathIndex = 0;
                const tryNextPath = () => {
                    if (pathIndex < alternativePaths.length) {
                        const testImg = new Image();
                        testImg.onload = function() {
                            applyImage(alternativePaths[pathIndex]);
                        };
                        testImg.onerror = function() {
                            pathIndex++;
                            if (pathIndex < alternativePaths.length) {
                                tryNextPath();
                            } else {
                                // Si ninguna ruta funciona, intentar con el elemento img
                                console.error('‚ùå No se pudo cargar la imagen en ninguna ruta, usando elemento img');
                                useImgFallback('./night.png');
                            }
                        };
                        testImg.src = alternativePaths[pathIndex];
                    } else {
                        useImgFallback('./night.png');
                    }
                };
                tryNextPath();
            };
            
            // Intentar cargar la imagen
            img.src = './night.png';
        })();

        // --- CONFIGURACI√ìN ---
        const CLICK_LIMIT = 11;
        let clickCount = 0;
        let messageShown = false;
        const counterEl = document.getElementById('counter');

        // --- COLORES DE LA IMAGEN ---
        // He extra√≠do los colores de tu imagen para los fuegos artificiales
        const palette = [
            '#ff9f1c', // Naranja luces
            '#ffbf69', // Naranja suave
            '#ff99c8', // Rosa flores
            '#fca311', // Amarillo fuerte
            '#ffffff'  // Blanco brillo
        ];

        // --- L√ìGICA CANVAS ---
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");
        let cw = window.innerWidth;
        let ch = window.innerHeight;
        let fireworks = [];
        let particles = [];
        let fireflies = []; // Array para las luci√©rnagas

        canvas.width = cw;
        canvas.height = ch;

        window.addEventListener("resize", () => {
            cw = window.innerWidth;
            ch = window.innerHeight;
            canvas.width = cw;
            canvas.height = ch;
        });

        function random(min, max) {
            return Math.random() * (max - min) + min;
        }

        function randomColor() {
            return palette[Math.floor(Math.random() * palette.length)];
        }

        class Firefly {
            constructor() {
                this.x = Math.random() * cw;
                this.y = Math.random() * ch; // Aparecen en cualquier altura inicial
                // Movimiento suave y aleatorio
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.radius = Math.random() * 1.5 + 0.5;
                this.alpha = Math.random();
                this.flashSpeed = Math.random() * 0.02 + 0.005;
                this.increasing = true;
                // Color amarillo/dorado suave
                this.color = `255, 200, 100`; 
            }

            update() {
                // Mover
                this.x += this.vx;
                this.y += this.vy;

                // Rebotar suavemente en los bordes o reaparecer
                if (this.x < 0 || this.x > cw) this.vx *= -1;
                if (this.y < 0 || this.y > ch) this.vy *= -1;

                // Efecto de parpadeo
                if (this.increasing) {
                    this.alpha += this.flashSpeed;
                    if (this.alpha >= 1) this.increasing = false;
                } else {
                    this.alpha -= this.flashSpeed;
                    if (this.alpha <= 0.2) this.increasing = true;
                }
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(${this.color}, ${this.alpha})`;
                
                // Brillo difuso alrededor
                ctx.shadowBlur = 10;
                ctx.shadowColor = `rgba(${this.color}, ${this.alpha})`;
                
                ctx.fill();
                ctx.shadowBlur = 0; // Resetear sombra para no afectar otros elementos
            }
        }

        // Inicializar luci√©rnagas
        function initNature() {
            for (let i = 0; i < 50; i++) { 
                fireflies.push(new Firefly());
            }
        }

        initNature();

        class Firework {
            constructor(sx, sy, tx, ty) {
                this.x = sx;
                this.y = sy;
                this.sx = sx;
                this.sy = sy;
                this.tx = tx;
                this.ty = ty;
                this.distanceToTarget = Math.sqrt(Math.pow(tx - sx, 2) + Math.pow(ty - sy, 2));
                this.distanceTraveled = 0;
                this.coordinates = [];
                this.coordinateCount = 3;
                while (this.coordinateCount--) {
                    this.coordinates.push([this.x, this.y]);
                }
                this.angle = Math.atan2(ty - sy, tx - sx);
                this.speed = 2;
                this.acceleration = 1.05;
                this.brightness = random(50, 70);
                this.color = randomColor(); // Color acorde al tema
            }

            update(index) {
                this.coordinates.pop();
                this.coordinates.unshift([this.x, this.y]);
                this.speed *= this.acceleration;
                const vx = Math.cos(this.angle) * this.speed;
                const vy = Math.sin(this.angle) * this.speed;
                this.distanceTraveled = Math.sqrt(Math.pow(this.sx - this.x, 2) + Math.pow(this.sy - this.y, 2));

                if (this.distanceTraveled >= this.distanceToTarget) {
                    createParticles(this.tx, this.ty, this.color);
                    fireworks.splice(index, 1);
                } else {
                    this.x += vx;
                    this.y += vy;
                }
            }

            draw() {
                ctx.beginPath();
                ctx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]);
                ctx.lineTo(this.x, this.y);
                ctx.strokeStyle = this.color; // Usar color de la paleta
                ctx.lineWidth = 2;
                ctx.stroke();
            }
        }

        class Particle {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                this.coordinates = [];
                this.coordinateCount = 5;
                while (this.coordinateCount--) {
                    this.coordinates.push([this.x, this.y]);
                }
                this.angle = random(0, Math.PI * 2);
                this.speed = random(1, 10);
                this.friction = 0.95;
                this.gravity = 1;
                this.color = color;
                this.alpha = 1;
                this.decay = random(0.015, 0.03);
            }

            update(index) {
                this.coordinates.pop();
                this.coordinates.unshift([this.x, this.y]);
                this.speed *= this.friction;
                this.x += Math.cos(this.angle) * this.speed;
                this.y += Math.sin(this.angle) * this.speed + this.gravity;
                this.alpha -= this.decay;

                if (this.alpha <= this.decay) {
                    particles.splice(index, 1);
                }
            }

            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.beginPath();
                ctx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]);
                ctx.lineTo(this.x, this.y);
                ctx.strokeStyle = this.color;
                ctx.lineWidth = 2;
                ctx.stroke();
                ctx.restore();
            }
        }

        function createParticles(x, y, color) {
            let particleCount = 40; // M√°s part√≠culas para que se vea mejor
            while (particleCount--) {
                particles.push(new Particle(x, y, color));
            }
        }

        function loop() {
            requestAnimationFrame(loop);
            // Truco para dejar estela transparente pero borrar lo anterior
            // Reducimos la opacidad para que la imagen de fondo sea visible
            ctx.globalCompositeOperation = 'destination-out';
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)'; // Reducido de 0.5 a 0.1 para que se vea el fondo
            ctx.fillRect(0, 0, cw, ch);
            
            ctx.globalCompositeOperation = 'source-over'; // Modo normal de dibujo

            let i = fireworks.length;
            while (i--) {
                fireworks[i].draw();
                fireworks[i].update(i);
            }

            let j = particles.length;
            while (j--) {
                particles[j].draw();
                particles[j].update(j);
            }

            // Dibujar y actualizar luci√©rnagas
            fireflies.forEach(firefly => {
                firefly.draw();
                firefly.update();
            });
        }

        // --- L√ìGICA DEL CURSOR M√ÅGICO ---
        const cursor = document.getElementById('cursor');
        
        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
            
            // Crear estela de polvo m√°gico
            if (Math.random() > 0.5) { // No crear en cada frame para no saturar
                const trail = document.createElement('div');
                trail.className = 'cursor-trail';
                trail.style.left = e.clientX + 'px';
                trail.style.top = e.clientY + 'px';
                // Variaci√≥n aleatoria de tama√±o
                const size = Math.random() * 6 + 2;
                trail.style.width = size + 'px';
                trail.style.height = size + 'px';
                
                document.body.appendChild(trail);
                
                // Eliminar el elemento despu√©s de la animaci√≥n
                setTimeout(() => {
                    trail.remove();
                }, 500);
            }
        });

        // Efecto al hacer click con el cursor
        document.addEventListener('mousedown', () => {
            cursor.style.transform = 'translate(-50%, -50%) scale(0.8)';
            cursor.style.borderColor = '#ff9f1c';
        });

        document.addEventListener('mouseup', () => {
            cursor.style.transform = 'translate(-50%, -50%) scale(1)';
            cursor.style.borderColor = 'rgba(255, 255, 255, 0.8)';
        });

        // --- INTERACCI√ìN ---
        canvas.addEventListener('click', (e) => {
            if (messageShown) return; // Si ya sali√≥ el mensaje, solo lanza fuegos sin contar

            fireworks.push(new Firework(cw / 2, ch, e.clientX, e.clientY));
            
            clickCount++;
            
            // Actualizar Contador Visual
            if(clickCount <= CLICK_LIMIT) {
                counterEl.innerText = `Magia: ${clickCount} / ${CLICK_LIMIT}`;
                // Efecto de pulso en el contador
                counterEl.style.transform = "scale(1.2)";
                setTimeout(() => counterEl.style.transform = "scale(1)", 100);
            }

            if (clickCount >= CLICK_LIMIT) {
                messageShown = true;
                counterEl.classList.add('hidden'); // Ocultar contador
                
                // Secuencia de mensajes antes del mensaje final
                mostrarSecuenciaMensajes();
            }
        });

        // Funci√≥n para mostrar la secuencia de mensajes
        function mostrarSecuenciaMensajes() {
            const messageBox = document.getElementById('message-box');
            const h1 = messageBox.querySelector('h1');
            const btn = messageBox.querySelector('.btn-si');
            const btnNo = document.getElementById('btn-no');
            
            // Ocultar los botones inicialmente
            btn.style.display = 'none';
            btnNo.style.display = 'none';
            
            // Secuencia de mensajes
            const mensajes = [
                { texto: "Ari ni√±a hermosa", duracion: 2000 },
                { texto: "Tengo una gran pregunta para ti", duracion: 2500 },
                { texto: "¬øQuieres ser mi novia?", duracion: 0, mostrarBoton: true }
            ];
            
            let indiceMensaje = 0;
            
            function mostrarSiguienteMensaje() {
                if (indiceMensaje >= mensajes.length) return;
                
                const mensaje = mensajes[indiceMensaje];
                
                // Ocultar el mensaje anterior
                messageBox.classList.remove('visible');
                
                setTimeout(() => {
                    // Cambiar el texto
                    h1.innerHTML = mensaje.texto;
                    
                    // Mostrar el mensaje con animaci√≥n
                    messageBox.classList.add('visible');
                    
                    // Si es el √∫ltimo mensaje, mostrar los botones
                    if (mensaje.mostrarBoton) {
                        setTimeout(() => {
                            btn.style.display = 'block';
                            btnNo.style.display = 'inline-block';
                            
                            // El bot√≥n NO empieza en posici√≥n relativa (al lado del S√ç)
                            // Solo se mover√° cuando se haga clic
                            btnNo.style.position = 'relative';
                            btnNo.style.margin = '20px 0 0 20px';
                            
                            // Peque√±o delay para la animaci√≥n de opacidad
                            setTimeout(() => {
                                btn.classList.add('show');
                                btnNo.classList.add('show');
                            }, 50);
                        }, 500);
                    }
                    
                    // Si hay m√°s mensajes, programar el siguiente
                    if (mensaje.duracion > 0) {
                        setTimeout(() => {
                            indiceMensaje++;
                            mostrarSiguienteMensaje();
                        }, mensaje.duracion);
                    }
                }, 300); // Peque√±o delay para la transici√≥n
            }
            
            // Iniciar la secuencia despu√©s de un peque√±o delay
            setTimeout(() => {
                mostrarSiguienteMensaje();
            }, 1000);
        }

        function aceptar() {
            const btn = document.querySelector('.btn-si');
            const h1 = document.querySelector('h1');
            
            // Agregar la clase de animaci√≥n al bot√≥n
            btn.classList.add('clicking');
            
            // Esperar a que termine la animaci√≥n antes de cambiar el texto e iniciar la celebraci√≥n
            setTimeout(() => {
                btn.style.display = 'none'; // Ocultar bot√≥n despu√©s de la animaci√≥n
                
                // Cambiar el texto con una transici√≥n suave
                h1.style.transition = 'all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
                h1.style.opacity = '0';
                
                setTimeout(() => {
                    h1.innerHTML = "¬°Te amo! <br> üß° üå∏ ‚ú®";
                    h1.style.transform = "scale(1.3)";
                    h1.style.opacity = '1';
                    
                    // Iniciar la celebraci√≥n masiva despu√©s de que aparezca el texto
                    iniciarCelebracion();
                }, 300);
            }, 600); // Esperar a que termine la animaci√≥n del bot√≥n (0.6s)
        }

        // Funci√≥n para mover el bot√≥n NO a otra posici√≥n (m√°s cerca y con rastro de cometa)
        let btnNoPosition = { x: 0, y: 0 };
        let isFirstMove = true; // Para saber si es el primer movimiento

        function moverBotonNo() {
            const btnNo = document.getElementById('btn-no');
            
            // Obtener posici√≥n actual del bot√≥n
            const rect = btnNo.getBoundingClientRect();
            const currentX = rect.left + rect.width / 2;
            const currentY = rect.top + rect.height / 2;
            
            // Si es el primer movimiento, cambiar a posici√≥n fixed
            if (isFirstMove) {
                btnNo.style.position = 'fixed';
                btnNo.style.margin = '0';
                isFirstMove = false;
            }
            
            // Calcular nueva posici√≥n m√°s cercana (m√°ximo 200px de distancia)
            const maxDistance = 200;
            const angle = Math.random() * Math.PI * 2;
            const distance = Math.random() * maxDistance + 50; // Entre 50 y 250px
            
            const newX = currentX + Math.cos(angle) * distance;
            const newY = currentY + Math.sin(angle) * distance;
            
            // Asegurar que no se salga de la pantalla
            const maxX = window.innerWidth - 100;
            const maxY = window.innerHeight - 50;
            const finalX = Math.max(50, Math.min(newX, maxX));
            const finalY = Math.max(50, Math.min(newY, maxY));
            
            // Guardar posici√≥n final
            btnNoPosition.x = finalX;
            btnNoPosition.y = finalY;
            
            // Agregar clase de movimiento para transici√≥n suave y brillo
            btnNo.classList.add('moving');
            
            // Crear rastro de cometa durante el movimiento
            crearRastroCometa(currentX, currentY, finalX, finalY);
            
            // Mover el bot√≥n a la nueva posici√≥n
            btnNo.style.left = (finalX - rect.width / 2) + 'px';
            btnNo.style.top = (finalY - rect.height / 2) + 'px';
            
            // Peque√±o efecto visual al moverse
            btnNo.style.transform = 'scale(0.9) rotate(5deg)';
            setTimeout(() => {
                btnNo.style.transform = 'scale(1) rotate(0deg)';
            }, 250);
            
            // Remover la clase de movimiento despu√©s de que termine la animaci√≥n
            setTimeout(() => {
                btnNo.classList.remove('moving');
            }, 500);
        }

        // Funci√≥n para crear el rastro de cometa mientras se mueve el bot√≥n
        function crearRastroCometa(startX, startY, endX, endY) {
            const duration = 500; // Duraci√≥n del movimiento en ms
            const trailCount = 15; // N√∫mero de part√≠culas en el rastro
            const interval = duration / trailCount;
            
            let step = 0;
            
            const createTrail = setInterval(() => {
                // Calcular posici√≥n intermedia
                const progress = step / trailCount;
                const x = startX + (endX - startX) * progress;
                const y = startY + (endY - startY) * progress;
                
                // Crear part√≠cula del rastro
                const trail = document.createElement('div');
                trail.className = 'comet-trail';
                trail.style.left = x + 'px';
                trail.style.top = y + 'px';
                
                // Variaci√≥n en tama√±o para efecto m√°s natural
                const size = Math.random() * 3 + 2;
                trail.style.width = size + 'px';
                trail.style.height = size + 'px';
                
                document.body.appendChild(trail);
                
                // Eliminar despu√©s de la animaci√≥n
                setTimeout(() => {
                    trail.remove();
                }, 800);
                
                step++;
                if (step >= trailCount) {
                    clearInterval(createTrail);
                }
            }, interval);
        }

        function iniciarCelebracion() {
            // Ocultar el bot√≥n NO cuando se acepta
            const btnNo = document.getElementById('btn-no');
            if (btnNo) {
                btnNo.style.display = 'none';
            }
            
            // R√°faga inicial masiva de fuegos artificiales
            for(let i = 0; i < 10; i++) {
                setTimeout(() => {
                    fireworks.push(new Firework(random(0, cw), ch, random(0, cw), random(0, ch/2)));
                }, i * 50);
            }
            
            // Celebraci√≥n sostenida e intensa
            let count = 0;
            const celebration = setInterval(() => {
                // Lanzar m√∫ltiples fuegos a la vez para llenar la pantalla
                fireworks.push(new Firework(random(0, cw), ch, random(0, cw), random(0, ch/2)));
                
                // A veces lanzar 2 o 3 a la vez para m√°s intensidad
                if (Math.random() > 0.5) {
                    fireworks.push(new Firework(random(0, cw), ch, random(0, cw), random(ch/3, ch/1.5)));
                }
                
                count++;
                // Duraci√≥n de la celebraci√≥n (aprox 10 segundos)
                if(count > 50) clearInterval(celebration);
            }, 200);
        }

        loop();

    </script>
</body>
</html>